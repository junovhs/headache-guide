{"version":3,"file":"index-B7G0158U.js","sources":["../../src/data.ts","../../src/engine.ts","../../src/ui.ts","../../src/main.ts"],"sourcesContent":["// ============================================================================\n// HEADACHE.GUIDE - Questions, Rules, and Remedies Data\n// ============================================================================\n\nimport type {\n  Question,\n  DiagnosticRule,\n  Remedy,\n  HeadacheCategory,\n  Answer,\n} from './types';\n\n// ============================================================================\n// QUESTIONS\n// ============================================================================\n\nexport const questions: Question[] = [\n  // RED FLAG SCREENING (always first)\n  {\n    id: 'red_flag_sudden',\n    text: 'Did this headache reach maximum intensity within seconds to minutes?',\n    subtext: 'Like a \"thunderclap\" - the worst headache of your life, instantly',\n    type: 'single',\n    options: [\n      { value: 'yes', label: 'Yes, it was sudden and severe', emoji: '‚ö†Ô∏è' },\n      { value: 'no', label: 'No, it built up gradually', emoji: '‚úì' },\n    ],\n    required: true,\n    category: 'red_flags',\n  },\n  {\n    id: 'red_flag_symptoms',\n    text: 'Are you experiencing any of these right now?',\n    subtext: 'Select all that apply',\n    type: 'multiple',\n    options: [\n      { value: 'fever_stiff_neck', label: 'Fever with stiff neck', emoji: 'ü§í' },\n      { value: 'vision_changes', label: 'Sudden vision changes or loss', emoji: 'üëÅÔ∏è' },\n      { value: 'confusion', label: 'Confusion or difficulty speaking', emoji: 'üß†' },\n      { value: 'weakness', label: 'Weakness or numbness on one side', emoji: 'üí™' },\n      { value: 'after_injury', label: 'This started after a head injury', emoji: 'ü§ï' },\n      { value: 'none', label: 'None of these', emoji: '‚úì' },\n    ],\n    required: true,\n    category: 'red_flags',\n  },\n\n  // ONSET & TIMING\n  {\n    id: 'onset',\n    text: 'When did this headache start?',\n    type: 'single',\n    options: [\n      { value: 'just_now', label: 'Just now (within the hour)', emoji: '‚è±Ô∏è' },\n      { value: 'few_hours', label: 'A few hours ago', emoji: 'üïê' },\n      { value: 'this_morning', label: 'This morning', emoji: 'üåÖ' },\n      { value: 'woke_with', label: 'I woke up with it', emoji: 'üò¥' },\n      { value: 'yesterday', label: 'Yesterday or longer', emoji: 'üìÖ' },\n    ],\n    required: true,\n    category: 'onset',\n  },\n  {\n    id: 'onset_pattern',\n    text: 'How did it develop?',\n    type: 'single',\n    options: [\n      { value: 'gradual', label: 'Slowly built up over time', emoji: 'üìà' },\n      { value: 'sudden', label: 'Came on quickly', emoji: '‚ö°' },\n      { value: 'constant', label: 'Been constant since it started', emoji: '‚û°Ô∏è' },\n      { value: 'waves', label: 'Comes and goes in waves', emoji: 'üåä' },\n    ],\n    required: true,\n    category: 'onset',\n  },\n\n  // LOCATION\n  {\n    id: 'location',\n    text: 'Where is the pain?',\n    subtext: 'Select all areas that apply',\n    type: 'multiple',\n    options: [\n      { value: 'forehead', label: 'Forehead', emoji: 'üîº' },\n      { value: 'temples', label: 'Temples (sides)', emoji: '‚óÄÔ∏è‚ñ∂Ô∏è' },\n      { value: 'behind_eyes', label: 'Behind the eyes', emoji: 'üëÄ' },\n      { value: 'top', label: 'Top of head', emoji: '‚¨ÜÔ∏è' },\n      { value: 'back', label: 'Back of head', emoji: 'üîΩ' },\n      { value: 'neck', label: 'Base of skull / upper neck', emoji: 'ü¶¥' },\n      { value: 'one_side', label: 'One side only', emoji: '‚ÜîÔ∏è' },\n      { value: 'face', label: 'Face / cheeks / sinuses', emoji: 'üò∑' },\n      { value: 'all_over', label: 'All over', emoji: 'üî¥' },\n    ],\n    required: true,\n    category: 'location',\n  },\n\n  // PAIN QUALITY\n  {\n    id: 'pain_quality',\n    text: 'What does the pain feel like?',\n    type: 'single',\n    options: [\n      { value: 'throbbing', label: 'Throbbing / pulsing', emoji: 'üíì' },\n      { value: 'pressure', label: 'Pressure / squeezing', emoji: 'üóúÔ∏è' },\n      { value: 'stabbing', label: 'Stabbing / sharp', emoji: 'üó°Ô∏è' },\n      { value: 'dull', label: 'Dull ache', emoji: 'üòë' },\n      { value: 'burning', label: 'Burning', emoji: 'üî•' },\n      { value: 'tight_band', label: 'Like a tight band around head', emoji: 'üéÄ' },\n    ],\n    required: true,\n    category: 'quality',\n  },\n  {\n    id: 'pain_intensity',\n    text: 'How intense is the pain right now?',\n    type: 'scale',\n    min: 1,\n    max: 10,\n    required: true,\n    category: 'quality',\n  },\n\n  // LIFESTYLE FACTORS\n  {\n    id: 'water_intake',\n    text: 'How much water have you had today?',\n    type: 'single',\n    options: [\n      { value: 'none', label: 'None or almost none', emoji: 'üèúÔ∏è' },\n      { value: 'little', label: 'A glass or two', emoji: 'ü•õ' },\n      { value: 'moderate', label: 'Been sipping throughout', emoji: 'üíß' },\n      { value: 'plenty', label: 'Plenty - well hydrated', emoji: 'üåä' },\n    ],\n    required: true,\n    category: 'lifestyle',\n  },\n  {\n    id: 'last_meal',\n    text: 'When did you last eat a real meal?',\n    type: 'single',\n    options: [\n      { value: 'within_2h', label: 'Within the last 2 hours', emoji: '‚úì' },\n      { value: '2_4h', label: '2-4 hours ago', emoji: 'üïê' },\n      { value: '4_8h', label: '4-8 hours ago', emoji: 'üòê' },\n      { value: 'over_8h', label: 'Over 8 hours ago', emoji: 'üò∞' },\n      { value: 'cant_remember', label: \"Can't remember\", emoji: '‚ùì' },\n    ],\n    required: true,\n    category: 'lifestyle',\n  },\n  {\n    id: 'caffeine_today',\n    text: \"How much caffeine have you had today compared to usual?\",\n    type: 'single',\n    options: [\n      { value: 'none_unusual', label: 'None (but I usually have some)', emoji: '‚òï‚ùå' },\n      { value: 'less', label: 'Less than usual', emoji: 'üìâ' },\n      { value: 'normal', label: 'About the same as usual', emoji: '‚òï' },\n      { value: 'more', label: 'More than usual', emoji: '‚òï‚òï‚òï' },\n      { value: 'dont_drink', label: \"I don't drink caffeine\", emoji: 'üö´' },\n    ],\n    required: true,\n    category: 'lifestyle',\n  },\n  {\n    id: 'sleep_last_night',\n    text: 'How was your sleep last night?',\n    type: 'single',\n    options: [\n      { value: 'great', label: 'Great - felt rested', emoji: 'üòä' },\n      { value: 'ok', label: 'Okay - not perfect but fine', emoji: 'üòê' },\n      { value: 'poor', label: 'Poor - woke up tired', emoji: 'üò´' },\n      { value: 'very_little', label: 'Very little (under 5 hours)', emoji: 'üòµ' },\n      { value: 'none', label: 'Basically none', emoji: 'üíÄ' },\n    ],\n    required: true,\n    category: 'lifestyle',\n  },\n  {\n    id: 'screen_time',\n    text: 'How much screen time today before the headache?',\n    type: 'single',\n    options: [\n      { value: 'minimal', label: 'Minimal (under 1 hour)', emoji: 'üì±' },\n      { value: 'moderate', label: '1-3 hours', emoji: 'üíª' },\n      { value: 'heavy', label: '3-6 hours', emoji: 'üñ•Ô∏è' },\n      { value: 'extreme', label: '6+ hours', emoji: 'üë®‚Äçüíª' },\n    ],\n    required: true,\n    category: 'lifestyle',\n  },\n  {\n    id: 'alcohol_recent',\n    text: 'Have you consumed alcohol in the last 24 hours?',\n    type: 'single',\n    options: [\n      { value: 'no', label: 'No', emoji: 'üö´' },\n      { value: 'one_two', label: '1-2 drinks', emoji: 'üç∑' },\n      { value: 'several', label: 'Several drinks', emoji: 'üç∫üç∫' },\n      { value: 'heavy', label: 'Heavy drinking', emoji: 'üçª' },\n    ],\n    required: true,\n    category: 'lifestyle',\n  },\n\n  // PHYSICAL FACTORS\n  {\n    id: 'neck_relief',\n    text: 'Does stretching or massaging your neck provide any relief?',\n    type: 'single',\n    options: [\n      { value: 'yes_helps', label: 'Yes, it helps temporarily', emoji: '‚úì' },\n      { value: 'no_change', label: 'No change', emoji: '‚ûñ' },\n      { value: 'makes_worse', label: 'Makes it worse', emoji: '‚ùå' },\n      { value: 'havent_tried', label: \"Haven't tried\", emoji: '‚ùì' },\n    ],\n    required: true,\n    category: 'triggers',\n  },\n  {\n    id: 'posture_activity',\n    text: 'What were you doing before the headache started?',\n    type: 'multiple',\n    options: [\n      { value: 'desk_work', label: 'Desk/computer work', emoji: 'üíº' },\n      { value: 'phone', label: 'Looking at phone', emoji: 'üì±' },\n      { value: 'driving', label: 'Driving', emoji: 'üöó' },\n      { value: 'reading', label: 'Reading', emoji: 'üìñ' },\n      { value: 'physical', label: 'Physical activity/exercise', emoji: 'üèÉ' },\n      { value: 'nothing_special', label: 'Nothing particular', emoji: 'ü§∑' },\n    ],\n    required: true,\n    category: 'triggers',\n  },\n\n  // ENVIRONMENTAL & OTHER\n  {\n    id: 'sinus_symptoms',\n    text: 'Do you have any of these sinus-related symptoms?',\n    type: 'multiple',\n    options: [\n      { value: 'congestion', label: 'Nasal congestion', emoji: 'ü§ß' },\n      { value: 'pressure_face', label: 'Pressure in face/cheeks', emoji: 'üò∑' },\n      { value: 'runny', label: 'Runny nose', emoji: 'üíß' },\n      { value: 'post_nasal', label: 'Post-nasal drip', emoji: 'üëÉ' },\n      { value: 'none', label: 'None of these', emoji: '‚úì' },\n    ],\n    required: true,\n    category: 'triggers',\n  },\n  {\n    id: 'light_sound_sensitivity',\n    text: 'Are light or sound bothering you more than usual?',\n    type: 'single',\n    options: [\n      { value: 'both', label: 'Yes, both light and sound', emoji: 'üîÜüîä' },\n      { value: 'light_only', label: 'Light only', emoji: 'üîÜ' },\n      { value: 'sound_only', label: 'Sound only', emoji: 'üîä' },\n      { value: 'no', label: 'No more than usual', emoji: '‚úì' },\n    ],\n    required: true,\n    category: 'triggers',\n  },\n  {\n    id: 'nausea',\n    text: 'Are you feeling nauseous?',\n    type: 'single',\n    options: [\n      { value: 'yes_severe', label: 'Yes, significantly', emoji: 'ü§¢' },\n      { value: 'mild', label: 'Mildly', emoji: 'üòê' },\n      { value: 'no', label: 'No', emoji: '‚úì' },\n    ],\n    required: true,\n    category: 'triggers',\n  },\n  {\n    id: 'stress_level',\n    text: 'How would you rate your stress level lately?',\n    type: 'single',\n    options: [\n      { value: 'low', label: 'Low - feeling relaxed', emoji: 'üòå' },\n      { value: 'moderate', label: 'Moderate - some things on my mind', emoji: 'üòê' },\n      { value: 'high', label: 'High - significant stress', emoji: 'üò∞' },\n      { value: 'extreme', label: 'Extreme - overwhelmed', emoji: 'üò´' },\n    ],\n    required: true,\n    category: 'triggers',\n  },\n  {\n    id: 'weather_change',\n    text: 'Has there been a significant weather or pressure change recently?',\n    type: 'single',\n    options: [\n      { value: 'yes', label: 'Yes', emoji: 'üå¶Ô∏è' },\n      { value: 'no', label: 'No', emoji: '‚òÄÔ∏è' },\n      { value: 'unsure', label: 'Not sure', emoji: '‚ùì' },\n    ],\n    required: true,\n    category: 'triggers',\n  },\n  {\n    id: 'medication_frequency',\n    text: 'How often do you take pain medication for headaches?',\n    type: 'single',\n    options: [\n      { value: 'rarely', label: 'Rarely (few times a month or less)', emoji: 'üíä' },\n      { value: 'weekly', label: '1-2 times per week', emoji: 'üíäüíä' },\n      { value: 'frequently', label: '3+ times per week', emoji: 'üíäüíäüíä' },\n      { value: 'daily', label: 'Almost daily', emoji: '‚ö†Ô∏è' },\n    ],\n    required: true,\n    category: 'triggers',\n  },\n];\n\n// ============================================================================\n// DIAGNOSTIC RULES\n// ============================================================================\n\nconst getAnswer = (answers: Map<string, Answer>, id: string): string | string[] | number | null => {\n  const answer = answers.get(id);\n  return answer?.value ?? null;\n};\n\nconst hasValue = (answers: Map<string, Answer>, id: string, value: string): boolean => {\n  const answer = getAnswer(answers, id);\n  if (Array.isArray(answer)) return answer.includes(value);\n  return answer === value;\n};\n\nconst hasAnyValue = (answers: Map<string, Answer>, id: string, values: string[]): boolean => {\n  return values.some(v => hasValue(answers, id, v));\n};\n\nexport const diagnosticRules: DiagnosticRule[] = [\n  // RED FLAGS\n  {\n    id: 'thunderclap',\n    description: 'Sudden severe onset - possible emergency',\n    condition: (answers) => hasValue(answers, 'red_flag_sudden', 'yes'),\n    weights: [{ category: 'red_flag', weight: 1.0, reason: 'Sudden severe headache requires immediate evaluation' }],\n  },\n  {\n    id: 'emergency_symptoms',\n    description: 'Dangerous accompanying symptoms',\n    condition: (answers) => {\n      const symptoms = getAnswer(answers, 'red_flag_symptoms');\n      if (!Array.isArray(symptoms)) return false;\n      return symptoms.some(s => s !== 'none');\n    },\n    weights: [{ category: 'red_flag', weight: 1.0, reason: 'Symptoms suggest possible serious condition' }],\n  },\n\n  // TENSION HEADACHE\n  {\n    id: 'tension_location',\n    description: 'Classic tension headache location',\n    condition: (answers) => hasAnyValue(answers, 'location', ['back', 'neck', 'temples', 'all_over']),\n    weights: [{ category: 'tension', weight: 0.3, reason: 'Location typical of tension headache' }],\n  },\n  {\n    id: 'tension_quality',\n    description: 'Tension headache pain quality',\n    condition: (answers) => hasAnyValue(answers, 'pain_quality', ['pressure', 'dull', 'tight_band']),\n    weights: [{ category: 'tension', weight: 0.3, reason: 'Pressure/tightness quality suggests tension' }],\n  },\n  {\n    id: 'tension_neck_relief',\n    description: 'Neck stretching provides relief',\n    condition: (answers) => hasValue(answers, 'neck_relief', 'yes_helps'),\n    weights: [{ category: 'tension', weight: 0.4, reason: 'Relief from neck stretching indicates muscular component' }],\n  },\n  {\n    id: 'tension_posture',\n    description: 'Preceded by postural strain activities',\n    condition: (answers) => hasAnyValue(answers, 'posture_activity', ['desk_work', 'phone', 'driving', 'reading']),\n    weights: [{ category: 'tension', weight: 0.3, reason: 'Activity involves sustained posture' }],\n  },\n  {\n    id: 'tension_stress',\n    description: 'High stress level',\n    condition: (answers) => hasAnyValue(answers, 'stress_level', ['high', 'extreme']),\n    weights: [\n      { category: 'tension', weight: 0.3, reason: 'Stress contributes to muscle tension' },\n      { category: 'stress', weight: 0.4, reason: 'High stress is a headache trigger' },\n    ],\n  },\n\n  // CERVICOGENIC (NECK-RELATED)\n  {\n    id: 'cervicogenic_location',\n    description: 'Pain at base of skull/neck',\n    condition: (answers) => hasAnyValue(answers, 'location', ['neck', 'back']),\n    weights: [{ category: 'cervicogenic', weight: 0.4, reason: 'Location suggests cervical origin' }],\n  },\n  {\n    id: 'cervicogenic_relief',\n    description: 'Neck manipulation helps',\n    condition: (answers) => hasValue(answers, 'neck_relief', 'yes_helps'),\n    weights: [{ category: 'cervicogenic', weight: 0.5, reason: 'Response to neck work suggests cervicogenic' }],\n  },\n  {\n    id: 'cervicogenic_screen',\n    description: 'Heavy screen time',\n    condition: (answers) => hasAnyValue(answers, 'screen_time', ['heavy', 'extreme']),\n    weights: [{ category: 'cervicogenic', weight: 0.3, reason: 'Extended screen time strains neck' }],\n  },\n\n  // DEHYDRATION\n  {\n    id: 'dehydration_intake',\n    description: 'Low water intake',\n    condition: (answers) => hasAnyValue(answers, 'water_intake', ['none', 'little']),\n    weights: [{ category: 'dehydration', weight: 0.6, reason: 'Insufficient fluid intake' }],\n  },\n  {\n    id: 'dehydration_alcohol',\n    description: 'Recent alcohol consumption',\n    condition: (answers) => hasAnyValue(answers, 'alcohol_recent', ['several', 'heavy']),\n    weights: [\n      { category: 'dehydration', weight: 0.4, reason: 'Alcohol causes dehydration' },\n      { category: 'alcohol', weight: 0.6, reason: 'Alcohol directly causes headaches' },\n    ],\n  },\n\n  // CAFFEINE\n  {\n    id: 'caffeine_withdrawal',\n    description: 'Less caffeine than usual',\n    condition: (answers) => hasAnyValue(answers, 'caffeine_today', ['none_unusual', 'less']),\n    weights: [{ category: 'caffeine_withdrawal', weight: 0.7, reason: 'Reduced caffeine triggers withdrawal headache' }],\n  },\n  {\n    id: 'caffeine_excess',\n    description: 'More caffeine than usual',\n    condition: (answers) => hasValue(answers, 'caffeine_today', 'more'),\n    weights: [{ category: 'caffeine_excess', weight: 0.5, reason: 'Excess caffeine can cause headaches' }],\n  },\n\n  // HUNGER\n  {\n    id: 'hunger_long',\n    description: 'Long time since eating',\n    condition: (answers) => hasAnyValue(answers, 'last_meal', ['4_8h', 'over_8h', 'cant_remember']),\n    weights: [{ category: 'hunger', weight: 0.6, reason: 'Low blood sugar from not eating' }],\n  },\n\n  // EYE STRAIN\n  {\n    id: 'eye_strain_location',\n    description: 'Pain behind eyes',\n    condition: (answers) => hasValue(answers, 'location', 'behind_eyes'),\n    weights: [{ category: 'eye_strain', weight: 0.4, reason: 'Location suggests eye strain' }],\n  },\n  {\n    id: 'eye_strain_screen',\n    description: 'Heavy screen time + eye location',\n    condition: (answers) => \n      hasAnyValue(answers, 'screen_time', ['heavy', 'extreme']) && \n      hasValue(answers, 'location', 'behind_eyes'),\n    weights: [{ category: 'eye_strain', weight: 0.6, reason: 'Screen time with eye pain indicates strain' }],\n  },\n\n  // SLEEP DEPRIVATION\n  {\n    id: 'sleep_poor',\n    description: 'Poor sleep',\n    condition: (answers) => hasAnyValue(answers, 'sleep_last_night', ['poor', 'very_little', 'none']),\n    weights: [{ category: 'sleep_deprivation', weight: 0.5, reason: 'Lack of sleep triggers headaches' }],\n  },\n  {\n    id: 'sleep_woke_with',\n    description: 'Woke up with headache after poor sleep',\n    condition: (answers) => \n      hasValue(answers, 'onset', 'woke_with') && \n      hasAnyValue(answers, 'sleep_last_night', ['poor', 'very_little', 'none']),\n    weights: [{ category: 'sleep_deprivation', weight: 0.7, reason: 'Waking with headache after poor sleep' }],\n  },\n\n  // SINUS\n  {\n    id: 'sinus_symptoms',\n    description: 'Sinus symptoms present',\n    condition: (answers) => {\n      const symptoms = getAnswer(answers, 'sinus_symptoms');\n      if (!Array.isArray(symptoms)) return false;\n      return symptoms.some(s => s !== 'none');\n    },\n    weights: [{ category: 'sinus', weight: 0.5, reason: 'Sinus symptoms present' }],\n  },\n  {\n    id: 'sinus_location',\n    description: 'Face/sinus location with symptoms',\n    condition: (answers) => {\n      const hasFaceLocation = hasValue(answers, 'location', 'face');\n      const symptoms = getAnswer(answers, 'sinus_symptoms');\n      if (!Array.isArray(symptoms)) return false;\n      return hasFaceLocation && symptoms.some(s => s !== 'none');\n    },\n    weights: [{ category: 'sinus', weight: 0.6, reason: 'Face pain with sinus symptoms' }],\n  },\n\n  // MIGRAINE\n  {\n    id: 'migraine_quality',\n    description: 'Throbbing unilateral pain',\n    condition: (answers) => \n      hasValue(answers, 'pain_quality', 'throbbing') && \n      hasValue(answers, 'location', 'one_side'),\n    weights: [{ category: 'migraine', weight: 0.5, reason: 'Throbbing one-sided pain typical of migraine' }],\n  },\n  {\n    id: 'migraine_sensitivity',\n    description: 'Light and sound sensitivity',\n    condition: (answers) => hasValue(answers, 'light_sound_sensitivity', 'both'),\n    weights: [{ category: 'migraine', weight: 0.5, reason: 'Photophobia and phonophobia suggest migraine' }],\n  },\n  {\n    id: 'migraine_nausea',\n    description: 'Significant nausea',\n    condition: (answers) => hasValue(answers, 'nausea', 'yes_severe'),\n    weights: [{ category: 'migraine', weight: 0.4, reason: 'Nausea commonly accompanies migraine' }],\n  },\n  {\n    id: 'migraine_cluster',\n    description: 'Multiple migraine indicators',\n    condition: (answers) => {\n      let count = 0;\n      if (hasValue(answers, 'pain_quality', 'throbbing')) count++;\n      if (hasValue(answers, 'location', 'one_side')) count++;\n      if (hasAnyValue(answers, 'light_sound_sensitivity', ['both', 'light_only'])) count++;\n      if (hasAnyValue(answers, 'nausea', ['yes_severe', 'mild'])) count++;\n      return count >= 3;\n    },\n    weights: [{ category: 'migraine', weight: 0.7, reason: 'Multiple migraine criteria met' }],\n  },\n\n  // WEATHER\n  {\n    id: 'weather_change',\n    description: 'Recent weather change',\n    condition: (answers) => hasValue(answers, 'weather_change', 'yes'),\n    weights: [{ category: 'weather', weight: 0.3, reason: 'Barometric pressure changes trigger headaches' }],\n  },\n\n  // MEDICATION OVERUSE\n  {\n    id: 'medication_overuse',\n    description: 'Frequent pain medication use',\n    condition: (answers) => hasAnyValue(answers, 'medication_frequency', ['frequently', 'daily']),\n    weights: [{ category: 'medication_overuse', weight: 0.6, reason: 'Frequent medication use can cause rebound headaches' }],\n  },\n];\n\n// ============================================================================\n// REMEDIES\n// ============================================================================\n\nexport const remedies: Record<HeadacheCategory, Remedy[]> = {\n  tension: [\n    {\n      id: 'tension_stretches',\n      title: 'Neck and Shoulder Stretches',\n      description: 'Release muscle tension with targeted stretches',\n      timeToEffect: '5-15 minutes',\n      steps: [\n        'Chin tucks: Pull chin straight back, hold 5 seconds, repeat 10x',\n        'Neck rolls: Slowly roll head in circles, 5 each direction',\n        'Shoulder shrugs: Raise shoulders to ears, hold 5 seconds, release',\n        'Upper trap stretch: Tilt ear to shoulder, hold 30 seconds each side',\n      ],\n      category: 'immediate',\n    },\n    {\n      id: 'tension_heat',\n      title: 'Apply Heat',\n      description: 'Relax tense muscles with warmth',\n      timeToEffect: '10-20 minutes',\n      steps: [\n        'Apply heating pad or warm towel to back of neck',\n        'Take a hot shower, letting water hit your neck and shoulders',\n        'Use a microwaveable heat wrap',\n      ],\n      category: 'immediate',\n    },\n    {\n      id: 'tension_suboccipital',\n      title: 'Suboccipital Release',\n      description: 'Target the muscles at the base of your skull',\n      timeToEffect: '5-10 minutes',\n      steps: [\n        'Lie on your back',\n        'Place two tennis balls or your fists at the base of your skull',\n        'Let your head rest on them with gentle pressure',\n        'Stay for 2-3 minutes, breathing deeply',\n      ],\n      category: 'immediate',\n    },\n    {\n      id: 'tension_break',\n      title: 'Take a Screen Break',\n      description: 'Give your eyes and posture a rest',\n      timeToEffect: '20-30 minutes',\n      steps: [\n        'Step away from all screens for at least 20 minutes',\n        'Look at distant objects to relax eye muscles',\n        'Walk around to reset your posture',\n      ],\n      category: 'immediate',\n    },\n  ],\n\n  cervicogenic: [\n    {\n      id: 'cervicogenic_stretches',\n      title: 'Cervical Stretches',\n      description: 'Mobilize your neck to relieve cervicogenic pain',\n      timeToEffect: '10-20 minutes',\n      steps: [\n        'Chin tucks: 10 repetitions, hold 5 seconds each',\n        'Gentle neck rotations: Look left, hold 10 seconds, then right',\n        'Levator scapulae stretch: Look into armpit, gentle pull with hand',\n      ],\n      category: 'immediate',\n    },\n    {\n      id: 'cervicogenic_posture',\n      title: 'Posture Correction',\n      description: 'Address the root cause',\n      timeToEffect: 'Ongoing',\n      steps: [\n        'Adjust monitor to eye level',\n        'Keep ears aligned over shoulders',\n        'Set hourly reminders to check posture',\n      ],\n      category: 'preventive',\n    },\n  ],\n\n  dehydration: [\n    {\n      id: 'dehydration_water',\n      title: 'Rehydrate',\n      description: 'Replace lost fluids',\n      timeToEffect: '30-60 minutes',\n      steps: [\n        'Drink 16-24 oz of water over the next hour',\n        'Add electrolytes if you have them (or a pinch of salt)',\n        'Continue sipping water throughout the day',\n      ],\n      warnings: ['Don\\'t chug large amounts at once - sip steadily'],\n      category: 'immediate',\n    },\n  ],\n\n  caffeine_withdrawal: [\n    {\n      id: 'caffeine_small_dose',\n      title: 'Have a Small Amount of Caffeine',\n      description: 'Ease withdrawal symptoms',\n      timeToEffect: '15-30 minutes',\n      steps: [\n        'Have half your usual coffee/tea',\n        'This should provide relief within 30 minutes',\n      ],\n      warnings: ['Don\\'t overcompensate with extra caffeine'],\n      category: 'immediate',\n    },\n    {\n      id: 'caffeine_gradual',\n      title: 'Gradual Reduction Plan',\n      description: 'Prevent future withdrawal headaches',\n      timeToEffect: 'Long-term',\n      steps: [\n        'Reduce caffeine by 25% per week',\n        'Maintain consistent timing of caffeine intake',\n        'Switch to half-caf as an intermediate step',\n      ],\n      category: 'preventive',\n    },\n  ],\n\n  caffeine_excess: [\n    {\n      id: 'caffeine_water',\n      title: 'Dilute and Wait',\n      description: 'Help your body process the excess caffeine',\n      timeToEffect: '1-2 hours',\n      steps: [\n        'Drink plenty of water',\n        'Avoid any more caffeine today',\n        'Light physical activity can help metabolize it faster',\n      ],\n      category: 'immediate',\n    },\n  ],\n\n  hunger: [\n    {\n      id: 'hunger_eat',\n      title: 'Eat Something',\n      description: 'Stabilize blood sugar',\n      timeToEffect: '20-40 minutes',\n      steps: [\n        'Eat a balanced snack or meal',\n        'Include protein and complex carbs for sustained energy',\n        'Avoid pure sugar which can cause a crash',\n      ],\n      category: 'immediate',\n    },\n  ],\n\n  eye_strain: [\n    {\n      id: 'eye_20_20_20',\n      title: '20-20-20 Rule',\n      description: 'Rest your eyes',\n      timeToEffect: '10-20 minutes',\n      steps: [\n        'Every 20 minutes, look at something 20 feet away for 20 seconds',\n        'Close your eyes and rest them for a minute',\n        'Reduce screen brightness if possible',\n      ],\n      category: 'immediate',\n    },\n    {\n      id: 'eye_palming',\n      title: 'Eye Palming',\n      description: 'Relax eye muscles',\n      timeToEffect: '5 minutes',\n      steps: [\n        'Rub palms together to warm them',\n        'Cup palms over closed eyes (don\\'t press)',\n        'Relax in darkness for 1-2 minutes',\n      ],\n      category: 'immediate',\n    },\n  ],\n\n  sleep_deprivation: [\n    {\n      id: 'sleep_nap',\n      title: 'Power Nap',\n      description: 'Give your brain a break',\n      timeToEffect: '20-30 minutes',\n      steps: [\n        'If possible, take a 20-minute nap',\n        'Set an alarm to avoid oversleeping',\n        'Even resting with eyes closed helps',\n      ],\n      category: 'immediate',\n    },\n    {\n      id: 'sleep_tonight',\n      title: 'Prioritize Sleep Tonight',\n      description: 'Recover properly',\n      timeToEffect: 'Tonight',\n      steps: [\n        'Go to bed earlier than usual',\n        'Avoid screens 1 hour before bed',\n        'Keep the room cool and dark',\n      ],\n      category: 'short_term',\n    },\n  ],\n\n  sinus: [\n    {\n      id: 'sinus_steam',\n      title: 'Steam Inhalation',\n      description: 'Open up congested sinuses',\n      timeToEffect: '10-15 minutes',\n      steps: [\n        'Boil water and pour into a bowl',\n        'Drape towel over head, lean over bowl',\n        'Breathe steam for 5-10 minutes',\n        'Add eucalyptus oil if available',\n      ],\n      category: 'immediate',\n    },\n    {\n      id: 'sinus_rinse',\n      title: 'Nasal Rinse',\n      description: 'Clear out sinuses',\n      timeToEffect: '5-10 minutes',\n      steps: [\n        'Use a neti pot or saline spray',\n        'Use distilled or previously boiled water only',\n        'Repeat 1-2 times daily as needed',\n      ],\n      warnings: ['Never use tap water directly - must be sterile'],\n      category: 'immediate',\n    },\n  ],\n\n  migraine: [\n    {\n      id: 'migraine_dark',\n      title: 'Dark, Quiet Room',\n      description: 'Reduce sensory input',\n      timeToEffect: 'Varies',\n      steps: [\n        'Go to a dark, quiet room',\n        'Lie down if possible',\n        'Apply cold compress to forehead or back of neck',\n      ],\n      category: 'immediate',\n    },\n    {\n      id: 'migraine_cold',\n      title: 'Cold Therapy',\n      description: 'Constrict blood vessels',\n      timeToEffect: '15-20 minutes',\n      steps: [\n        'Apply ice pack or cold compress to forehead',\n        'Can also try back of neck',\n        'Use for 15-20 minutes at a time',\n      ],\n      category: 'immediate',\n    },\n  ],\n\n  stress: [\n    {\n      id: 'stress_breathing',\n      title: 'Deep Breathing',\n      description: 'Activate relaxation response',\n      timeToEffect: '5-10 minutes',\n      steps: [\n        'Breathe in slowly for 4 counts',\n        'Hold for 4 counts',\n        'Exhale slowly for 6 counts',\n        'Repeat for 5-10 cycles',\n      ],\n      category: 'immediate',\n    },\n    {\n      id: 'stress_walk',\n      title: 'Brief Walk',\n      description: 'Physical reset',\n      timeToEffect: '15-20 minutes',\n      steps: [\n        'Take a short walk outside if possible',\n        'Focus on your surroundings, not your thoughts',\n        'Even 10 minutes helps',\n      ],\n      category: 'immediate',\n    },\n  ],\n\n  medication_overuse: [\n    {\n      id: 'moh_awareness',\n      title: 'Medication Overuse Awareness',\n      description: 'Understanding rebound headaches',\n      timeToEffect: 'Long-term',\n      steps: [\n        'Track your medication use in a headache diary',\n        'Aim to use acute medications fewer than 10 days per month',\n        'Consider speaking with a doctor about preventive options',\n      ],\n      warnings: ['Do not stop medications abruptly without medical guidance'],\n      category: 'preventive',\n    },\n  ],\n\n  weather: [\n    {\n      id: 'weather_general',\n      title: 'Weather-Related Relief',\n      description: 'Manage barometric pressure headaches',\n      timeToEffect: 'Varies',\n      steps: [\n        'Stay well-hydrated during weather changes',\n        'Consider OTC pain relief if needed',\n        'Rest in a comfortable environment',\n      ],\n      category: 'immediate',\n    },\n  ],\n\n  alcohol: [\n    {\n      id: 'alcohol_recovery',\n      title: 'Hangover Recovery',\n      description: 'Address alcohol-related headache',\n      timeToEffect: '1-2 hours',\n      steps: [\n        'Rehydrate with water and electrolytes',\n        'Eat easily digestible food',\n        'Rest if possible',\n        'Avoid \"hair of the dog\" - more alcohol makes it worse',\n      ],\n      category: 'immediate',\n    },\n  ],\n\n  unknown: [\n    {\n      id: 'unknown_general',\n      title: 'General Relief Measures',\n      description: 'Try these common remedies',\n      timeToEffect: 'Varies',\n      steps: [\n        'Drink water',\n        'Take a break from screens',\n        'Rest in a comfortable position',\n        'Consider OTC pain relief if appropriate',\n      ],\n      category: 'immediate',\n    },\n  ],\n\n  red_flag: [],\n};\n\n// ============================================================================\n// LEGAL DISCLAIMER\n// ============================================================================\n\nexport const legalDisclaimer = `\nIMPORTANT MEDICAL DISCLAIMER\n\nThis tool is for informational and educational purposes only. It is not intended to be a substitute for professional medical advice, diagnosis, or treatment.\n\n‚Ä¢ This tool does not provide medical diagnoses\n‚Ä¢ Results are based solely on the information you provide\n‚Ä¢ Headaches can have many causes, some serious\n‚Ä¢ Always seek the advice of a qualified healthcare provider with any questions about a medical condition\n‚Ä¢ Never disregard professional medical advice or delay seeking it because of something you read here\n‚Ä¢ If you think you may have a medical emergency, call your doctor or emergency services immediately\n\nBy using this tool, you acknowledge that you understand and agree to these terms.\n`.trim();\n\nexport const redFlagWarning = `\n‚ö†Ô∏è SEEK IMMEDIATE MEDICAL ATTENTION\n\nBased on your responses, you may be experiencing symptoms that require urgent medical evaluation.\n\nPlease contact emergency services (911) or go to your nearest emergency room if you are experiencing:\n‚Ä¢ The worst headache of your life with sudden onset\n‚Ä¢ Headache with fever and stiff neck\n‚Ä¢ Headache with confusion, weakness, vision changes, or difficulty speaking\n‚Ä¢ Headache following head injury\n\nThis is not a diagnosis. These symptoms can have many causes, but they should be evaluated by a medical professional promptly to rule out serious conditions.\n`.trim();\n","// ============================================================================\n// HEADACHE.GUIDE - Diagnostic Engine\n// ============================================================================\n\nimport type {\n  Answer,\n  DiagnosticResult,\n  HeadacheCategory,\n  Remedy,\n} from './types';\nimport {\n  diagnosticRules,\n  remedies,\n  legalDisclaimer,\n  redFlagWarning,\n} from './data';\n\n/** Score accumulator for each headache category */\ninterface CategoryScores {\n  [key: string]: {\n    score: number;\n    reasons: string[];\n  };\n}\n\n/**\n * Run the diagnostic engine on a set of answers\n */\nexport function runDiagnosis(answers: Answer[]): DiagnosticResult {\n  // Convert answers array to map for easier lookup\n  const answerMap = new Map<string, Answer>();\n  for (const answer of answers) {\n    answerMap.set(answer.questionId, answer);\n  }\n\n  // Check for red flags first\n  const redFlags = checkRedFlags(answerMap);\n  if (redFlags.length > 0) {\n    return createRedFlagResult(redFlags);\n  }\n\n  // Calculate scores for each category\n  const scores = calculateScores(answerMap);\n\n  // Determine primary and secondary causes\n  const { primary, secondary } = rankCauses(scores);\n\n  // Get appropriate remedies\n  const applicableRemedies = getRemedies(primary, secondary);\n\n  // Build reasoning\n  const reasoning = buildReasoning(scores, primary);\n\n  return {\n    primaryCause: primary.category,\n    confidence: Math.round(primary.confidence),\n    secondaryCauses: secondary.map(s => ({\n      cause: s.category,\n      confidence: Math.round(s.confidence),\n    })),\n    reasoning,\n    remedies: applicableRemedies,\n    redFlags: [],\n    disclaimer: legalDisclaimer,\n    seekMedicalAttention: false,\n    urgency: 'none',\n  };\n}\n\n/**\n * Check for red flag symptoms that require immediate attention\n */\nfunction checkRedFlags(answers: Map<string, Answer>): string[] {\n  const redFlags: string[] = [];\n\n  // Check thunderclap headache\n  const suddenOnset = answers.get('red_flag_sudden');\n  if (suddenOnset?.value === 'yes') {\n    redFlags.push('Sudden severe headache with maximum intensity reached within seconds to minutes');\n  }\n\n  // Check dangerous symptoms\n  const symptoms = answers.get('red_flag_symptoms');\n  if (Array.isArray(symptoms?.value)) {\n    const dangerousSymptoms = symptoms.value.filter(s => s !== 'none');\n    \n    const symptomDescriptions: Record<string, string> = {\n      fever_stiff_neck: 'Fever with stiff neck',\n      vision_changes: 'Sudden vision changes',\n      confusion: 'Confusion or difficulty speaking',\n      weakness: 'Weakness or numbness on one side',\n      after_injury: 'Headache following head injury',\n    };\n\n    for (const symptom of dangerousSymptoms) {\n      if (symptomDescriptions[symptom]) {\n        redFlags.push(symptomDescriptions[symptom]);\n      }\n    }\n  }\n\n  return redFlags;\n}\n\n/**\n * Create result for red flag cases\n */\nfunction createRedFlagResult(redFlags: string[]): DiagnosticResult {\n  return {\n    primaryCause: 'red_flag',\n    confidence: 100,\n    secondaryCauses: [],\n    reasoning: [\n      'Your symptoms include warning signs that require immediate medical evaluation.',\n      'This is not a diagnosis, but these symptoms should be assessed by a healthcare professional promptly.',\n    ],\n    remedies: [],\n    redFlags,\n    disclaimer: redFlagWarning,\n    seekMedicalAttention: true,\n    urgency: 'immediate',\n  };\n}\n\n/**\n * Calculate weighted scores for each headache category\n */\nfunction calculateScores(answers: Map<string, Answer>): CategoryScores {\n  const scores: CategoryScores = {};\n\n  // Initialize all categories\n  const categories: HeadacheCategory[] = [\n    'tension', 'dehydration', 'caffeine_withdrawal', 'caffeine_excess',\n    'hunger', 'eye_strain', 'sleep_deprivation', 'sinus', 'migraine',\n    'cervicogenic', 'stress', 'medication_overuse', 'weather', 'alcohol', 'unknown',\n  ];\n\n  for (const cat of categories) {\n    scores[cat] = { score: 0, reasons: [] };\n  }\n\n  // Apply each rule\n  for (const rule of diagnosticRules) {\n    if (rule.condition(answers)) {\n      for (const weight of rule.weights) {\n        if (weight.category !== 'red_flag') {\n          scores[weight.category].score += weight.weight;\n          scores[weight.category].reasons.push(weight.reason);\n        }\n      }\n    }\n  }\n\n  return scores;\n}\n\n/**\n * Rank causes by score and calculate confidence\n */\nfunction rankCauses(scores: CategoryScores): {\n  primary: { category: HeadacheCategory; confidence: number };\n  secondary: Array<{ category: HeadacheCategory; confidence: number }>;\n} {\n  // Sort categories by score\n  const sorted = Object.entries(scores)\n    .filter(([_, data]) => data.score > 0)\n    .sort((a, b) => b[1].score - a[1].score);\n\n  // If no scores, return unknown\n  if (sorted.length === 0) {\n    return {\n      primary: { category: 'unknown', confidence: 50 },\n      secondary: [],\n    };\n  }\n\n  // Calculate total score for normalization\n  const totalScore = sorted.reduce((sum, [_, data]) => sum + data.score, 0);\n\n  // Primary cause\n  const [primaryCat, primaryData] = sorted[0];\n  const primaryConfidence = Math.min(95, (primaryData.score / totalScore) * 100 + 20);\n\n  // Secondary causes (top 2 others with meaningful scores)\n  const secondary = sorted\n    .slice(1, 3)\n    .filter(([_, data]) => data.score > 0.2)\n    .map(([cat, data]) => ({\n      category: cat as HeadacheCategory,\n      confidence: Math.min(80, (data.score / totalScore) * 100 + 10),\n    }));\n\n  return {\n    primary: {\n      category: primaryCat as HeadacheCategory,\n      confidence: primaryConfidence,\n    },\n    secondary,\n  };\n}\n\n/**\n * Get remedies for the identified causes\n */\nfunction getRemedies(\n  primary: { category: HeadacheCategory; confidence: number },\n  secondary: Array<{ category: HeadacheCategory; confidence: number }>\n): Remedy[] {\n  const result: Remedy[] = [];\n  const addedIds = new Set<string>();\n\n  // Add primary remedies\n  const primaryRemedies = remedies[primary.category] || [];\n  for (const remedy of primaryRemedies) {\n    if (!addedIds.has(remedy.id)) {\n      result.push(remedy);\n      addedIds.add(remedy.id);\n    }\n  }\n\n  // Add secondary remedies (immediate ones only)\n  for (const sec of secondary) {\n    const secRemedies = remedies[sec.category] || [];\n    for (const remedy of secRemedies) {\n      if (!addedIds.has(remedy.id) && remedy.category === 'immediate') {\n        result.push(remedy);\n        addedIds.add(remedy.id);\n      }\n    }\n  }\n\n  // If no remedies found, add general ones\n  if (result.length === 0) {\n    const unknownRemedies = remedies['unknown'] || [];\n    for (const remedy of unknownRemedies) {\n      result.push(remedy);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Build human-readable reasoning\n */\nfunction buildReasoning(scores: CategoryScores, primary: { category: HeadacheCategory; confidence: number }): string[] {\n  const reasoning: string[] = [];\n\n  const categoryLabels: Record<HeadacheCategory, string> = {\n    tension: 'Tension Headache',\n    dehydration: 'Dehydration',\n    caffeine_withdrawal: 'Caffeine Withdrawal',\n    caffeine_excess: 'Excess Caffeine',\n    hunger: 'Low Blood Sugar / Hunger',\n    eye_strain: 'Eye Strain',\n    sleep_deprivation: 'Sleep Deprivation',\n    sinus: 'Sinus-Related',\n    migraine: 'Migraine',\n    cervicogenic: 'Neck/Posture-Related (Cervicogenic)',\n    stress: 'Stress-Related',\n    medication_overuse: 'Medication Overuse',\n    weather: 'Weather/Pressure Change',\n    alcohol: 'Alcohol-Related',\n    unknown: 'Unclear Cause',\n    red_flag: 'Warning Signs',\n  };\n\n  // Main conclusion\n  reasoning.push(\n    `Based on your responses, this appears most likely to be a ${categoryLabels[primary.category]} headache.`\n  );\n\n  // Supporting evidence\n  const primaryReasons = scores[primary.category]?.reasons || [];\n  if (primaryReasons.length > 0) {\n    reasoning.push('Key factors:');\n    for (const reason of primaryReasons.slice(0, 3)) {\n      reasoning.push(`‚Ä¢ ${reason}`);\n    }\n  }\n\n  return reasoning;\n}\n\n/**\n * Get a friendly label for a category\n */\nexport function getCategoryLabel(category: HeadacheCategory): string {\n  const labels: Record<HeadacheCategory, string> = {\n    tension: 'Tension Headache',\n    dehydration: 'Dehydration Headache',\n    caffeine_withdrawal: 'Caffeine Withdrawal Headache',\n    caffeine_excess: 'Caffeine-Induced Headache',\n    hunger: 'Hunger/Blood Sugar Headache',\n    eye_strain: 'Eye Strain Headache',\n    sleep_deprivation: 'Sleep Deprivation Headache',\n    sinus: 'Sinus Headache',\n    migraine: 'Migraine',\n    cervicogenic: 'Cervicogenic (Neck-Related) Headache',\n    stress: 'Stress Headache',\n    medication_overuse: 'Medication Overuse Headache',\n    weather: 'Barometric Pressure Headache',\n    alcohol: 'Alcohol-Related Headache',\n    unknown: 'Undetermined Cause',\n    red_flag: 'Warning - Seek Medical Care',\n  };\n  return labels[category] || category;\n}\n\n/**\n * Get a description for a category\n */\nexport function getCategoryDescription(category: HeadacheCategory): string {\n  const descriptions: Record<HeadacheCategory, string> = {\n    tension: 'Caused by muscle tension in the head, neck, and shoulders. Often related to stress, poor posture, or prolonged screen use.',\n    dehydration: 'Occurs when your body lacks sufficient fluids. The brain can temporarily shrink from fluid loss, causing pain.',\n    caffeine_withdrawal: 'Happens when regular caffeine users miss or reduce their usual intake. Blood vessels dilate, causing a throbbing headache.',\n    caffeine_excess: 'Too much caffeine can cause headaches through vasoconstriction and nervous system stimulation.',\n    hunger: 'Low blood sugar from skipped meals triggers headaches. Your brain needs consistent glucose to function properly.',\n    eye_strain: 'Results from prolonged focus on screens or reading. Eye muscles fatigue and refer pain to the head.',\n    sleep_deprivation: 'Lack of sleep disrupts pain regulation and can trigger inflammatory responses causing headaches.',\n    sinus: 'Inflammation or congestion in the sinuses creates pressure and pain in the face and head.',\n    migraine: 'A neurological condition causing moderate to severe throbbing pain, often with nausea and sensitivity to light/sound.',\n    cervicogenic: 'Originates from the cervical spine (neck). Poor posture and neck strain refer pain to the head.',\n    stress: 'Emotional and mental stress causes muscle tension and changes in neurotransmitters that trigger headaches.',\n    medication_overuse: 'Frequent use of pain medications can paradoxically cause more headaches as the body becomes dependent.',\n    weather: 'Changes in barometric pressure can affect sinus pressure and blood flow, triggering headaches in sensitive individuals.',\n    alcohol: 'Alcohol causes dehydration, inflammation, and blood vessel changes that result in headache.',\n    unknown: 'The cause isn\\'t clear from the available information. Try general relief measures.',\n    red_flag: 'Symptoms suggest a potentially serious condition requiring medical evaluation.',\n  };\n  return descriptions[category] || '';\n}\n","// ============================================================================\n// HEADACHE.GUIDE - UI Module\n// ============================================================================\n\nimport type {\n  AppState,\n  Question,\n  Answer,\n  DiagnosticResult,\n  Remedy,\n  QuestionOption,\n} from './types';\nimport { questions, legalDisclaimer } from './data';\nimport { getCategoryLabel, getCategoryDescription } from './engine';\n\n/** DOM Element references */\ninterface DOMRefs {\n  app: HTMLElement;\n  screen: HTMLElement;\n}\n\n/** Get DOM references */\nfunction getRefs(): DOMRefs {\n  const app = document.getElementById('app');\n  if (!app) throw new Error('App container not found');\n  \n  let screen = document.getElementById('screen');\n  if (!screen) {\n    screen = document.createElement('div');\n    screen.id = 'screen';\n    app.appendChild(screen);\n  }\n\n  return { app, screen };\n}\n\n/** Clear and return the screen element */\nfunction clearScreen(): HTMLElement {\n  const { screen } = getRefs();\n  screen.innerHTML = '';\n  return screen;\n}\n\n/** Create an element with optional classes and content */\nfunction el<K extends keyof HTMLElementTagNameMap>(\n  tag: K,\n  options?: {\n    className?: string;\n    text?: string;\n    html?: string;\n    attrs?: Record<string, string>;\n    children?: HTMLElement[];\n    onClick?: () => void;\n  }\n): HTMLElementTagNameMap[K] {\n  const element = document.createElement(tag);\n  \n  if (options?.className) {\n    element.className = options.className;\n  }\n  if (options?.text) {\n    element.textContent = options.text;\n  }\n  if (options?.html) {\n    element.innerHTML = options.html;\n  }\n  if (options?.attrs) {\n    for (const [key, value] of Object.entries(options.attrs)) {\n      element.setAttribute(key, value);\n    }\n  }\n  if (options?.children) {\n    for (const child of options.children) {\n      element.appendChild(child);\n    }\n  }\n  if (options?.onClick) {\n    element.addEventListener('click', options.onClick);\n  }\n\n  return element;\n}\n\n// ============================================================================\n// SCREEN RENDERERS\n// ============================================================================\n\n/** Render the welcome screen */\nexport function renderWelcome(onStart: () => void): void {\n  const screen = clearScreen();\n  screen.className = 'screen welcome-screen';\n\n  const container = el('div', { className: 'welcome-container' });\n\n  // Logo/Title\n  const header = el('div', { className: 'welcome-header' });\n  const icon = el('div', { className: 'welcome-icon', text: 'üéØ' });\n  const title = el('h1', { className: 'welcome-title', text: 'headache.guide' });\n  const subtitle = el('p', { \n    className: 'welcome-subtitle', \n    text: 'Find out what\\'s causing your headache in under 2 minutes' \n  });\n  header.appendChild(icon);\n  header.appendChild(title);\n  header.appendChild(subtitle);\n\n  // Features\n  const features = el('div', { className: 'welcome-features' });\n  const featureItems = [\n    { icon: '‚ö°', text: 'Quick assessment' },\n    { icon: 'üéØ', text: 'Targeted remedies' },\n    { icon: 'üîí', text: 'Private & anonymous' },\n  ];\n  for (const item of featureItems) {\n    const feature = el('div', { className: 'feature-item' });\n    feature.appendChild(el('span', { className: 'feature-icon', text: item.icon }));\n    feature.appendChild(el('span', { className: 'feature-text', text: item.text }));\n    features.appendChild(feature);\n  }\n\n  // Start button\n  const startBtn = el('button', {\n    className: 'btn btn-primary btn-large',\n    text: 'Start Assessment',\n    onClick: onStart,\n  });\n\n  // Disclaimer\n  const disclaimer = el('div', { className: 'welcome-disclaimer' });\n  const disclaimerToggle = el('button', {\n    className: 'disclaimer-toggle',\n    text: 'üìã Medical Disclaimer',\n    onClick: () => {\n      disclaimerContent.classList.toggle('expanded');\n      disclaimerToggle.classList.toggle('active');\n    },\n  });\n  const disclaimerContent = el('div', { \n    className: 'disclaimer-content',\n    text: legalDisclaimer,\n  });\n  disclaimer.appendChild(disclaimerToggle);\n  disclaimer.appendChild(disclaimerContent);\n\n  container.appendChild(header);\n  container.appendChild(features);\n  container.appendChild(startBtn);\n  container.appendChild(disclaimer);\n  screen.appendChild(container);\n}\n\n/** Render a question */\nexport function renderQuestion(\n  question: Question,\n  currentIndex: number,\n  totalQuestions: number,\n  currentAnswer: Answer | undefined,\n  onAnswer: (answer: Answer) => void,\n  onBack: (() => void) | null,\n): void {\n  const screen = clearScreen();\n  screen.className = 'screen question-screen';\n\n  const container = el('div', { className: 'question-container' });\n\n  // Progress bar\n  const progress = el('div', { className: 'progress-container' });\n  const progressBar = el('div', { className: 'progress-bar' });\n  const progressFill = el('div', { \n    className: 'progress-fill',\n    attrs: { style: `width: ${((currentIndex + 1) / totalQuestions) * 100}%` },\n  });\n  const progressText = el('span', { \n    className: 'progress-text', \n    text: `${currentIndex + 1} of ${totalQuestions}` \n  });\n  progressBar.appendChild(progressFill);\n  progress.appendChild(progressBar);\n  progress.appendChild(progressText);\n\n  // Question text\n  const questionHeader = el('div', { className: 'question-header' });\n  const questionText = el('h2', { className: 'question-text', text: question.text });\n  questionHeader.appendChild(questionText);\n  if (question.subtext) {\n    const subtext = el('p', { className: 'question-subtext', text: question.subtext });\n    questionHeader.appendChild(subtext);\n  }\n\n  // Options\n  const optionsContainer = el('div', { className: 'options-container' });\n\n  if (question.type === 'single' && question.options) {\n    renderSingleOptions(optionsContainer, question, currentAnswer, onAnswer);\n  } else if (question.type === 'multiple' && question.options) {\n    renderMultipleOptions(optionsContainer, question, currentAnswer, onAnswer);\n  } else if (question.type === 'scale') {\n    renderScaleOptions(optionsContainer, question, currentAnswer, onAnswer);\n  }\n\n  // Navigation\n  const nav = el('div', { className: 'question-nav' });\n  if (onBack) {\n    const backBtn = el('button', {\n      className: 'btn btn-secondary',\n      text: '‚Üê Back',\n      onClick: onBack,\n    });\n    nav.appendChild(backBtn);\n  }\n\n  container.appendChild(progress);\n  container.appendChild(questionHeader);\n  container.appendChild(optionsContainer);\n  container.appendChild(nav);\n  screen.appendChild(container);\n}\n\n/** Render single-choice options */\nfunction renderSingleOptions(\n  container: HTMLElement,\n  question: Question,\n  currentAnswer: Answer | undefined,\n  onAnswer: (answer: Answer) => void,\n): void {\n  const options = question.options || [];\n  \n  for (const option of options) {\n    const isSelected = currentAnswer?.value === option.value;\n    const optionEl = el('button', {\n      className: `option-btn ${isSelected ? 'selected' : ''}`,\n      onClick: () => {\n        onAnswer({\n          questionId: question.id,\n          value: option.value,\n          timestamp: Date.now(),\n        });\n      },\n    });\n\n    if (option.emoji) {\n      optionEl.appendChild(el('span', { className: 'option-emoji', text: option.emoji }));\n    }\n    optionEl.appendChild(el('span', { className: 'option-label', text: option.label }));\n    \n    container.appendChild(optionEl);\n  }\n}\n\n/** Render multiple-choice options */\nfunction renderMultipleOptions(\n  container: HTMLElement,\n  question: Question,\n  currentAnswer: Answer | undefined,\n  onAnswer: (answer: Answer) => void,\n): void {\n  const options = question.options || [];\n  const selectedValues: string[] = Array.isArray(currentAnswer?.value) \n    ? currentAnswer.value as string[]\n    : [];\n\n  const optionsWrapper = el('div', { className: 'multi-options-wrapper' });\n  \n  for (const option of options) {\n    const isSelected = selectedValues.includes(option.value);\n    const optionEl = el('button', {\n      className: `option-btn multi ${isSelected ? 'selected' : ''}`,\n      onClick: () => {\n        let newValues: string[];\n        \n        // Handle \"none\" option\n        if (option.value === 'none') {\n          newValues = ['none'];\n        } else {\n          // Remove 'none' if selecting something else\n          const withoutNone = selectedValues.filter(v => v !== 'none');\n          \n          if (isSelected) {\n            newValues = withoutNone.filter(v => v !== option.value);\n          } else {\n            newValues = [...withoutNone, option.value];\n          }\n        }\n        \n        onAnswer({\n          questionId: question.id,\n          value: newValues,\n          timestamp: Date.now(),\n        });\n      },\n    });\n\n    const checkbox = el('span', { \n      className: `checkbox ${isSelected ? 'checked' : ''}`,\n      text: isSelected ? '‚úì' : '',\n    });\n    optionEl.appendChild(checkbox);\n    \n    if (option.emoji) {\n      optionEl.appendChild(el('span', { className: 'option-emoji', text: option.emoji }));\n    }\n    optionEl.appendChild(el('span', { className: 'option-label', text: option.label }));\n    \n    optionsWrapper.appendChild(optionEl);\n  }\n\n  container.appendChild(optionsWrapper);\n\n  // Continue button for multiple choice\n  const continueBtn = el('button', {\n    className: `btn btn-primary ${selectedValues.length === 0 ? 'disabled' : ''}`,\n    text: 'Continue ‚Üí',\n    attrs: selectedValues.length === 0 ? { disabled: 'true' } : {},\n    onClick: () => {\n      if (selectedValues.length > 0) {\n        // Trigger next by re-answering (the parent will handle progression)\n        onAnswer({\n          questionId: question.id,\n          value: selectedValues,\n          timestamp: Date.now(),\n        });\n      }\n    },\n  });\n  container.appendChild(continueBtn);\n}\n\n/** Render scale options (1-10) */\nfunction renderScaleOptions(\n  container: HTMLElement,\n  question: Question,\n  currentAnswer: Answer | undefined,\n  onAnswer: (answer: Answer) => void,\n): void {\n  const min = question.min || 1;\n  const max = question.max || 10;\n  const currentValue = typeof currentAnswer?.value === 'number' ? currentAnswer.value : null;\n\n  const scaleWrapper = el('div', { className: 'scale-wrapper' });\n  \n  // Labels\n  const labels = el('div', { className: 'scale-labels' });\n  labels.appendChild(el('span', { text: 'Mild' }));\n  labels.appendChild(el('span', { text: 'Severe' }));\n  scaleWrapper.appendChild(labels);\n\n  // Scale buttons\n  const scaleButtons = el('div', { className: 'scale-buttons' });\n  for (let i = min; i <= max; i++) {\n    const isSelected = currentValue === i;\n    const btn = el('button', {\n      className: `scale-btn ${isSelected ? 'selected' : ''} ${i <= 3 ? 'low' : i <= 6 ? 'medium' : 'high'}`,\n      text: String(i),\n      onClick: () => {\n        onAnswer({\n          questionId: question.id,\n          value: i,\n          timestamp: Date.now(),\n        });\n      },\n    });\n    scaleButtons.appendChild(btn);\n  }\n  scaleWrapper.appendChild(scaleButtons);\n\n  container.appendChild(scaleWrapper);\n}\n\n/** Render the results screen */\nexport function renderResults(result: DiagnosticResult, onReset: () => void): void {\n  const screen = clearScreen();\n  screen.className = 'screen results-screen';\n\n  const container = el('div', { className: 'results-container' });\n\n  // Check for red flags first\n  if (result.seekMedicalAttention) {\n    renderEmergencyResult(container, result, onReset);\n    screen.appendChild(container);\n    return;\n  }\n\n  // Header\n  const header = el('div', { className: 'results-header' });\n  const headerIcon = el('div', { className: 'results-icon', text: '‚úì' });\n  const headerTitle = el('h1', { className: 'results-title', text: 'Assessment Complete' });\n  header.appendChild(headerIcon);\n  header.appendChild(headerTitle);\n\n  // Primary diagnosis\n  const diagnosis = el('div', { className: 'diagnosis-card' });\n  const diagnosisLabel = el('div', { className: 'diagnosis-label', text: 'Most Likely Cause' });\n  const diagnosisName = el('h2', { \n    className: 'diagnosis-name', \n    text: getCategoryLabel(result.primaryCause) \n  });\n  const diagnosisConfidence = el('div', { \n    className: 'diagnosis-confidence',\n    text: `${result.confidence}% confidence`,\n  });\n  const diagnosisDesc = el('p', { \n    className: 'diagnosis-description',\n    text: getCategoryDescription(result.primaryCause),\n  });\n  diagnosis.appendChild(diagnosisLabel);\n  diagnosis.appendChild(diagnosisName);\n  diagnosis.appendChild(diagnosisConfidence);\n  diagnosis.appendChild(diagnosisDesc);\n\n  // Reasoning\n  if (result.reasoning.length > 0) {\n    const reasoning = el('div', { className: 'reasoning-section' });\n    const reasoningTitle = el('h3', { text: 'Why we think this:' });\n    reasoning.appendChild(reasoningTitle);\n    for (const reason of result.reasoning) {\n      reasoning.appendChild(el('p', { text: reason }));\n    }\n    diagnosis.appendChild(reasoning);\n  }\n\n  // Secondary causes\n  if (result.secondaryCauses.length > 0) {\n    const secondary = el('div', { className: 'secondary-causes' });\n    secondary.appendChild(el('h4', { text: 'Contributing factors:' }));\n    for (const cause of result.secondaryCauses) {\n      const causeEl = el('div', { className: 'secondary-cause' });\n      causeEl.appendChild(el('span', { \n        className: 'secondary-name',\n        text: getCategoryLabel(cause.cause),\n      }));\n      causeEl.appendChild(el('span', { \n        className: 'secondary-confidence',\n        text: `${cause.confidence}%`,\n      }));\n      secondary.appendChild(causeEl);\n    }\n    diagnosis.appendChild(secondary);\n  }\n\n  // Remedies\n  const remediesSection = el('div', { className: 'remedies-section' });\n  const remediesTitle = el('h2', { className: 'remedies-title', text: 'Recommended Actions' });\n  remediesSection.appendChild(remediesTitle);\n\n  const immediateRemedies = result.remedies.filter(r => r.category === 'immediate');\n  const otherRemedies = result.remedies.filter(r => r.category !== 'immediate');\n\n  if (immediateRemedies.length > 0) {\n    remediesSection.appendChild(el('h3', { className: 'remedy-category', text: '‚ö° Do Now' }));\n    for (const remedy of immediateRemedies) {\n      remediesSection.appendChild(renderRemedy(remedy));\n    }\n  }\n\n  if (otherRemedies.length > 0) {\n    remediesSection.appendChild(el('h3', { className: 'remedy-category', text: 'üìã Also Consider' }));\n    for (const remedy of otherRemedies) {\n      remediesSection.appendChild(renderRemedy(remedy));\n    }\n  }\n\n  // Disclaimer\n  const disclaimer = el('div', { className: 'results-disclaimer' });\n  disclaimer.appendChild(el('h4', { text: '‚ö†Ô∏è Important' }));\n  disclaimer.appendChild(el('p', { text: result.disclaimer }));\n\n  // Reset button\n  const actions = el('div', { className: 'results-actions' });\n  const resetBtn = el('button', {\n    className: 'btn btn-secondary',\n    text: 'Start Over',\n    onClick: onReset,\n  });\n  actions.appendChild(resetBtn);\n\n  container.appendChild(header);\n  container.appendChild(diagnosis);\n  container.appendChild(remediesSection);\n  container.appendChild(disclaimer);\n  container.appendChild(actions);\n  screen.appendChild(container);\n}\n\n/** Render a single remedy card */\nfunction renderRemedy(remedy: Remedy): HTMLElement {\n  const card = el('div', { className: 'remedy-card' });\n  \n  const header = el('div', { className: 'remedy-header' });\n  header.appendChild(el('h4', { className: 'remedy-title', text: remedy.title }));\n  header.appendChild(el('span', { className: 'remedy-time', text: `‚è±Ô∏è ${remedy.timeToEffect}` }));\n  \n  card.appendChild(header);\n  card.appendChild(el('p', { className: 'remedy-description', text: remedy.description }));\n\n  if (remedy.steps && remedy.steps.length > 0) {\n    const steps = el('ol', { className: 'remedy-steps' });\n    for (const step of remedy.steps) {\n      steps.appendChild(el('li', { text: step }));\n    }\n    card.appendChild(steps);\n  }\n\n  if (remedy.warnings && remedy.warnings.length > 0) {\n    const warnings = el('div', { className: 'remedy-warnings' });\n    for (const warning of remedy.warnings) {\n      warnings.appendChild(el('p', { text: `‚ö†Ô∏è ${warning}` }));\n    }\n    card.appendChild(warnings);\n  }\n\n  return card;\n}\n\n/** Render emergency/red flag result */\nfunction renderEmergencyResult(\n  container: HTMLElement, \n  result: DiagnosticResult,\n  onReset: () => void,\n): void {\n  const emergency = el('div', { className: 'emergency-container' });\n\n  const icon = el('div', { className: 'emergency-icon', text: '‚ö†Ô∏è' });\n  const title = el('h1', { className: 'emergency-title', text: 'Seek Medical Attention' });\n  \n  const message = el('div', { className: 'emergency-message' });\n  message.appendChild(el('p', { \n    text: 'Based on your responses, you may be experiencing symptoms that require prompt medical evaluation.' \n  }));\n\n  if (result.redFlags.length > 0) {\n    const flags = el('div', { className: 'red-flags-list' });\n    flags.appendChild(el('h3', { text: 'Concerning symptoms:' }));\n    const flagList = el('ul');\n    for (const flag of result.redFlags) {\n      flagList.appendChild(el('li', { text: flag }));\n    }\n    flags.appendChild(flagList);\n    message.appendChild(flags);\n  }\n\n  const actions = el('div', { className: 'emergency-actions' });\n  actions.appendChild(el('p', { className: 'emergency-instruction', html: `\n    <strong>If symptoms are severe:</strong> Call 911 or go to the nearest emergency room.<br><br>\n    <strong>If symptoms are mild but concerning:</strong> Contact your doctor or visit urgent care today.\n  `}));\n\n  const disclaimer = el('div', { className: 'emergency-disclaimer' });\n  disclaimer.appendChild(el('p', { \n    text: 'This is not a diagnosis. Many conditions can cause these symptoms, and most are not emergencies. However, these symptoms should be evaluated by a healthcare professional to rule out serious conditions.' \n  }));\n\n  const resetBtn = el('button', {\n    className: 'btn btn-secondary',\n    text: 'Start Over',\n    onClick: onReset,\n  });\n\n  emergency.appendChild(icon);\n  emergency.appendChild(title);\n  emergency.appendChild(message);\n  emergency.appendChild(actions);\n  emergency.appendChild(disclaimer);\n  emergency.appendChild(resetBtn);\n  \n  container.appendChild(emergency);\n}\n\n/** Render loading state */\nexport function renderLoading(): void {\n  const screen = clearScreen();\n  screen.className = 'screen loading-screen';\n  \n  const loader = el('div', { className: 'loader' });\n  const spinner = el('div', { className: 'spinner' });\n  const text = el('p', { text: 'Analyzing your responses...' });\n  \n  loader.appendChild(spinner);\n  loader.appendChild(text);\n  screen.appendChild(loader);\n}\n","// ============================================================================\n// HEADACHE.GUIDE - Main Application Entry Point\n// ============================================================================\n\nimport type { AppState, Answer, DiagnosticSession } from './types';\nimport { questions } from './data';\nimport { runDiagnosis } from './engine';\nimport {\n  renderWelcome,\n  renderQuestion,\n  renderResults,\n  renderLoading,\n} from './ui';\n\n// ============================================================================\n// APPLICATION STATE\n// ============================================================================\n\nlet state: AppState = {\n  currentScreen: 'welcome',\n  session: null,\n  isLoading: false,\n  error: null,\n};\n\n/** Generate a unique session ID */\nfunction generateSessionId(): string {\n  return `session_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n}\n\n/** Create a new diagnostic session */\nfunction createSession(): DiagnosticSession {\n  return {\n    id: generateSessionId(),\n    startedAt: Date.now(),\n    answers: [],\n    currentQuestionIndex: 0,\n    completed: false,\n    result: undefined,\n  };\n}\n\n/** Get the current answer for a question */\nfunction getCurrentAnswer(questionId: string): Answer | undefined {\n  if (!state.session) return undefined;\n  return state.session.answers.find(a => a.questionId === questionId);\n}\n\n/** Filter questions based on red flag answers */\nfunction getApplicableQuestions(): typeof questions {\n  // Always show all questions for now\n  // Could be enhanced to skip irrelevant questions based on previous answers\n  return questions;\n}\n\n// ============================================================================\n// STATE MANAGEMENT\n// ============================================================================\n\n/** Start a new session */\nfunction startSession(): void {\n  state = {\n    currentScreen: 'questions',\n    session: createSession(),\n    isLoading: false,\n    error: null,\n  };\n  render();\n}\n\n/** Handle answering a question */\nfunction answerQuestion(answer: Answer): void {\n  if (!state.session) return;\n\n  const applicableQuestions = getApplicableQuestions();\n  const currentQuestion = applicableQuestions[state.session.currentQuestionIndex];\n  \n  // Update or add the answer\n  const existingIndex = state.session.answers.findIndex(\n    a => a.questionId === answer.questionId\n  );\n  \n  if (existingIndex >= 0) {\n    state.session.answers[existingIndex] = answer;\n  } else {\n    state.session.answers.push(answer);\n  }\n\n  // For multiple choice, only advance if this is the \"continue\" action\n  // (when the answer hasn't changed, it means user clicked continue)\n  if (currentQuestion.type === 'multiple') {\n    const existingAnswer = getCurrentAnswer(answer.questionId);\n    const isContinue = existingAnswer && \n      JSON.stringify(existingAnswer.value) === JSON.stringify(answer.value);\n    \n    if (!isContinue) {\n      // Just updating selection, don't advance\n      render();\n      return;\n    }\n  }\n\n  // Check for red flags after first two questions\n  if (state.session.currentQuestionIndex === 1) {\n    const hasRedFlags = checkForRedFlags();\n    if (hasRedFlags) {\n      completeSession();\n      return;\n    }\n  }\n\n  // Advance to next question or complete\n  if (state.session.currentQuestionIndex < applicableQuestions.length - 1) {\n    state.session.currentQuestionIndex++;\n    render();\n  } else {\n    completeSession();\n  }\n}\n\n/** Check if red flags are present */\nfunction checkForRedFlags(): boolean {\n  if (!state.session) return false;\n  \n  const suddenAnswer = state.session.answers.find(a => a.questionId === 'red_flag_sudden');\n  if (suddenAnswer?.value === 'yes') return true;\n  \n  const symptomsAnswer = state.session.answers.find(a => a.questionId === 'red_flag_symptoms');\n  if (Array.isArray(symptomsAnswer?.value)) {\n    const hasFlags = symptomsAnswer.value.some((v: string) => v !== 'none');\n    if (hasFlags) return true;\n  }\n  \n  return false;\n}\n\n/** Go back to previous question */\nfunction goBack(): void {\n  if (!state.session || state.session.currentQuestionIndex === 0) return;\n  \n  state.session.currentQuestionIndex--;\n  render();\n}\n\n/** Complete the session and show results */\nfunction completeSession(): void {\n  if (!state.session) return;\n\n  state.isLoading = true;\n  render();\n\n  // Simulate brief processing time for UX\n  setTimeout(() => {\n    if (!state.session) return;\n    \n    const result = runDiagnosis(state.session.answers);\n    state.session.completed = true;\n    state.session.result = result;\n    state.currentScreen = 'results';\n    state.isLoading = false;\n    render();\n  }, 800);\n}\n\n/** Reset to welcome screen */\nfunction reset(): void {\n  state = {\n    currentScreen: 'welcome',\n    session: null,\n    isLoading: false,\n    error: null,\n  };\n  render();\n}\n\n// ============================================================================\n// RENDERING\n// ============================================================================\n\n/** Main render function */\nfunction render(): void {\n  if (state.isLoading) {\n    renderLoading();\n    return;\n  }\n\n  switch (state.currentScreen) {\n    case 'welcome':\n      renderWelcome(startSession);\n      break;\n\n    case 'questions':\n      if (state.session) {\n        const applicableQuestions = getApplicableQuestions();\n        const currentQuestion = applicableQuestions[state.session.currentQuestionIndex];\n        const currentAnswer = getCurrentAnswer(currentQuestion.id);\n        \n        renderQuestion(\n          currentQuestion,\n          state.session.currentQuestionIndex,\n          applicableQuestions.length,\n          currentAnswer,\n          answerQuestion,\n          state.session.currentQuestionIndex > 0 ? goBack : null,\n        );\n      }\n      break;\n\n    case 'results':\n      if (state.session?.result) {\n        renderResults(state.session.result, reset);\n      }\n      break;\n  }\n}\n\n// ============================================================================\n// INITIALIZATION\n// ============================================================================\n\n/** Initialize the application */\nexport function init(): void {\n  // Ensure DOM is ready\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n      render();\n    });\n  } else {\n    render();\n  }\n}\n\n// Auto-initialize\ninit();\n"],"names":["questions","getAnswer","answers","id","answer","hasValue","value","hasAnyValue","values","v","diagnosticRules","symptoms","s","hasFaceLocation","count","remedies","legalDisclaimer","redFlagWarning","runDiagnosis","answerMap","redFlags","checkRedFlags","createRedFlagResult","scores","calculateScores","primary","secondary","rankCauses","applicableRemedies","getRemedies","reasoning","buildReasoning","suddenOnset","dangerousSymptoms","symptomDescriptions","symptom","categories","cat","rule","weight","sorted","_","data","a","b","totalScore","sum","primaryCat","primaryData","primaryConfidence","result","addedIds","primaryRemedies","remedy","sec","secRemedies","unknownRemedies","categoryLabels","primaryReasons","_a","reason","getCategoryLabel","category","getCategoryDescription","getRefs","app","screen","clearScreen","el","tag","options","element","key","child","renderWelcome","onStart","container","header","icon","title","subtitle","features","featureItems","item","feature","startBtn","disclaimer","disclaimerToggle","disclaimerContent","renderQuestion","question","currentIndex","totalQuestions","currentAnswer","onAnswer","onBack","progress","progressBar","progressFill","progressText","questionHeader","questionText","subtext","optionsContainer","renderSingleOptions","renderMultipleOptions","renderScaleOptions","nav","backBtn","option","isSelected","optionEl","selectedValues","optionsWrapper","newValues","withoutNone","checkbox","continueBtn","min","max","currentValue","scaleWrapper","labels","scaleButtons","i","btn","renderResults","onReset","renderEmergencyResult","headerIcon","headerTitle","diagnosis","diagnosisLabel","diagnosisName","diagnosisConfidence","diagnosisDesc","reasoningTitle","cause","causeEl","remediesSection","remediesTitle","immediateRemedies","r","otherRemedies","renderRemedy","actions","resetBtn","card","steps","step","warnings","warning","emergency","message","flags","flagList","flag","renderLoading","loader","spinner","text","state","generateSessionId","createSession","getCurrentAnswer","questionId","getApplicableQuestions","startSession","render","answerQuestion","applicableQuestions","currentQuestion","existingIndex","existingAnswer","checkForRedFlags","completeSession","suddenAnswer","symptomsAnswer","goBack","reset","init"],"mappings":"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"}